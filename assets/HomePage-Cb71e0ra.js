import{k as $,l as F,m as I,n as U,d as j,p as k,q as c,o as d,F as T,s as o,t as q,v as b,x,y as B,a as e,z as S,A as V,B as _,C as D,c as M,f as O}from"./vue-MVS1_hXh.js";function N(p,n,m=300){const l=$({...p}),a=$({}),r=$({}),u=F(()=>Object.values(a).every(t=>t.length===0));let f;const v=async(t,s)=>{a[t]=[];const i=n[t]||{};Object.keys(i).forEach(g=>{const E=i[g];typeof E.validator=="function"&&!E.validator(s)&&E.messageError&&(a[t]||(a[t]=[]),a[t].push(E.messageError))}),await U()},y=()=>{Object.keys(l).forEach(t=>h(t))},h=async t=>{r[t]=!0,await v(t,l[t])},w=()=>{clearTimeout(f),Object.keys(l).forEach(t=>{l[t]=p[t]}),Object.keys(a).forEach(t=>a[t]=[]),Object.keys(r).forEach(t=>r[t]=!1)};return I(l,()=>{clearTimeout(f),f=setTimeout(h,m)},{deep:!0}),{values:l,errors:a,isValid:u,touched:r,validateForm:y,resetForm:w,markTouched:h}}const H={class:"form-group"},R=["aria-invalid"],L={key:0,class:"error-list",id:"error-name"},P={class:"form-group"},G=["aria-invalid"],z={key:0,class:"error-list",id:"error-email"},A={class:"form-group"},J=["aria-invalid"],K={key:0,class:"error-list",id:"error-password"},Q={key:0,class:"success-message"},W=j({__name:"ValidationTest",setup(p){const n=k(""),m={name:"",email:"",password:""},l={name:{required:{messageError:"Имя обязательно",validator:t=>!!t},minLength:{messageError:"Минимальная длина имени 3 символа",validator:t=>t.length>=3}},email:{required:{messageError:"Email обязателен",validator:t=>!!t},email:{messageError:"Некорректный формат email",validator:t=>/\S+@\S+\.\S+/.test(t)}},password:{required:{messageError:"Пароль обязателен",validator:t=>!!t},minLength:{messageError:"Минимальная длина пароля 6 символов",validator:t=>t.length>=6}}},{values:a,errors:r,touched:u,validateForm:f,resetForm:v,markTouched:y,isValid:h}=N(m,l),w=()=>{f(),h.value&&(n.value="Форма успешно отправлена!",setTimeout(()=>n.value="",3e3))};return(t,s)=>(d(),c(T,null,[s[10]||(s[10]=o("h2",null,"Задание 1",-1)),o("div",null,[o("form",{onSubmit:q(w,["prevent"]),class:"form-container"},[o("div",H,[s[7]||(s[7]=o("label",{for:"name"},"Имя:",-1)),x(o("input",{id:"name","onUpdate:modelValue":s[0]||(s[0]=i=>e(a).name=i),onBlur:s[1]||(s[1]=i=>e(y)("name")),type:"text",class:S({"input-error":e(u).name&&e(r).name.length}),"aria-invalid":e(u).name&&e(r).name.length?"true":"false","aria-describedby":"error-name",autocomplete:"name"},null,42,R),[[B,e(a).name,void 0,{trim:!0}]]),e(u).name&&e(r).name.length?(d(),c("ul",L,[(d(!0),c(T,null,V(e(r).name,(i,g)=>(d(),c("li",{key:g},_(i),1))),128))])):b("",!0)]),o("div",P,[s[8]||(s[8]=o("label",{for:"email"},"Email:",-1)),x(o("input",{id:"email","onUpdate:modelValue":s[2]||(s[2]=i=>e(a).email=i),onBlur:s[3]||(s[3]=i=>e(y)("email")),type:"email",class:S({"input-error":e(u).email&&e(r).email.length}),"aria-invalid":e(u).email&&e(r).email.length?"true":"false","aria-describedby":"error-email",autocomplete:"email"},null,42,G),[[B,e(a).email,void 0,{trim:!0}]]),e(u).email&&e(r).email.length?(d(),c("ul",z,[(d(!0),c(T,null,V(e(r).email,(i,g)=>(d(),c("li",{key:g},_(i),1))),128))])):b("",!0)]),o("div",A,[s[9]||(s[9]=o("label",{for:"password"},"Пароль:",-1)),x(o("input",{id:"password","onUpdate:modelValue":s[4]||(s[4]=i=>e(a).password=i),onBlur:s[5]||(s[5]=i=>e(y)("password")),type:"password",class:S({"input-error":e(u).password&&e(r).password.length}),"aria-invalid":e(u).password&&e(r).password.length?"true":"false","aria-describedby":"error-password",autocomplete:"new-password"},null,42,J),[[B,e(a).password]]),e(u).password&&e(r).password.length?(d(),c("ul",K,[(d(!0),c(T,null,V(e(r).password,(i,g)=>(d(),c("li",{key:g},_(i),1))),128))])):b("",!0)]),o("button",{type:"submit",class:"btn submit-btn",onClick:w},"Отправить"),o("button",{type:"button",onClick:s[6]||(s[6]=(...i)=>e(v)&&e(v)(...i)),class:"btn reset-btn"},"Сбросить"),n.value?(d(),c("p",Q,_(n.value),1)):b("",!0)],32)])],64))}}),C=(p,n)=>{const m=p.__vccOpts||p;for(const[l,a]of n)m[l]=a;return m},X=C(W,[["__scopeId","data-v-e9bb432e"]]);function Y(p,n={}){const m=k(null),l=k(!1),a=k(null),r=k(!1);return{data:m,loading:l,error:a,success:r,fetchData:async(f={})=>{l.value=!0,a.value=null,r.value=!1;try{let v=p;if(n.params){const w=new URLSearchParams(n.params).toString();v+=`?${w}`}const y={...n,...f,headers:{"Content-Type":"application/json",...n.headers,...f.headers},body:n.body?JSON.stringify(n.body):void 0},h=await fetch(v,y);if(!h.ok)throw new Error(`Ошибка ${h.status}: ${h.statusText}`);m.value=await h.json(),r.value=!0}catch(v){a.value=v.message||"Ошибка запроса"}finally{l.value=!1}}}}const Z={xmlns:"http://www.w3.org/2000/svg",width:"256",height:"256",viewBox:"0 0 200 200"};function ee(p,n){return d(),c("svg",Z,n[0]||(n[0]=[D('<radialGradient id="a" cx=".66" cy=".313" fx=".66" fy=".313" gradientTransform="scale(1.5)"><stop offset="0"></stop><stop offset=".3" stop-opacity=".9"></stop><stop offset=".6" stop-opacity=".6"></stop><stop offset=".8" stop-opacity=".3"></stop><stop offset="1" stop-opacity="0"></stop></radialGradient><circle cx="100" cy="100" r="70" fill="none" stroke="url(#a)" stroke-dasharray="200 1000" stroke-linecap="round" stroke-width="16" transform-origin="center"><animateTransform attributeName="transform" calcMode="spline" dur="2" keySplines="0 0 1 1" keyTimes="0;1" repeatCount="indefinite" type="rotate" values="360;0"></animateTransform></circle><circle cx="100" cy="100" r="70" fill="none" stroke="#000" stroke-linecap="round" stroke-width="16" opacity=".2" transform-origin="center"></circle>',3)]))}const te={render:ee},se={class:"container"},ae={key:1},re={key:0,class:"card"},oe={class:"card-header"},ne={class:"user-id"},ie={class:"card-body"},le={key:1,class:"error"},de=j({__name:"HttpTest",setup(p){const m=`https://jsonplaceholder.typicode.com/posts/${Math.floor(Math.random()*100)+1}`,{data:l,loading:a,success:r,error:u,fetchData:f}=Y(m,{method:"GET"});return f(),(v,y)=>(d(),c(T,null,[y[0]||(y[0]=o("h2",null,"Задание 2",-1)),o("div",se,[e(a)?(d(),M(e(te),{key:0})):(d(),c("div",ae,[e(r)?(d(),c("div",re,[o("div",oe,[o("h2",null,_(e(l).title),1),o("p",ne,"User ID: "+_(e(l).userId),1)]),o("div",ie,[o("p",null,_(e(l).body),1)])])):b("",!0),e(u)?(d(),c("div",le,_(e(u)),1)):b("",!0)]))])],64))}}),ce=C(de,[["__scopeId","data-v-26975043"]]),ue={class:"container"},me=j({__name:"HomePage",setup(p){return(n,m)=>(d(),c("div",ue,[O(X),O(ce)]))}}),fe=C(me,[["__scopeId","data-v-8231d481"]]);export{fe as default};
