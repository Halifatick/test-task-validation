import{k as x,l as F,m as q,n as N,d as j,p as b,q as l,o as i,F as k,s as u,t as D,v as w,x as $,y as B,a as e,z as S,A as V,B as T,C as H,c as U,f as O}from"./vue-MVS1_hXh.js";function L(p,o,m=300){const d=x({...p}),s=x({}),r=x({}),c=F(()=>Object.values(s).every(t=>t.length===0));let f;const y=async(t,a)=>{s[t]=[];const n=o[t]||{};Object.keys(n).forEach(h=>{const E=n[h];typeof E.validator=="function"&&!E.validator(a)&&E.messageError&&(s[t]||(s[t]=[]),s[t].push(E.messageError))}),await N()},g=()=>{Object.keys(d).forEach(t=>v(t))},v=async t=>{r[t]=!0,await y(t,d[t])},_=()=>{clearTimeout(f),Object.keys(d).forEach(t=>{d[t]=p[t]}),Object.keys(s).forEach(t=>s[t]=[]),Object.keys(r).forEach(t=>r[t]=!1)};return q(d,()=>{clearTimeout(f),f=setTimeout(v,m)},{deep:!0}),{values:d,errors:s,isValid:c,touched:r,validateForm:g,resetForm:_,markTouched:v}}const M={class:"form-group"},G=["aria-invalid"],I={key:0,class:"error-list",id:"error-name"},P={class:"form-group"},R=["aria-invalid"],z={key:0,class:"error-list",id:"error-email"},A={class:"form-group"},J=["aria-invalid"],K={key:0,class:"error-list",id:"error-password"},Q={key:0,class:"success-message"},W=j({__name:"ValidationTest",setup(p){const o=b(""),m={name:"",email:"",password:""},d={name:{required:{messageError:"Имя обязательно",validator:t=>!!t},minLength:{messageError:"Минимальная длина имени 3 символа",validator:t=>t.length>=3}},email:{required:{messageError:"Email обязателен",validator:t=>!!t},email:{messageError:"Некорректный формат email",validator:t=>/\S+@\S+\.\S+/.test(t)}},password:{required:{messageError:"Пароль обязателен",validator:t=>!!t},minLength:{messageError:"Минимальная длина пароля 6 символов",validator:t=>t.length>=6}}},{values:s,errors:r,touched:c,validateForm:f,resetForm:y,markTouched:g,isValid:v}=L(m,d),_=()=>{f(),v.value&&(o.value="Форма успешно отправлена!",setTimeout(()=>o.value="",3e3))};return(t,a)=>(i(),l(k,null,[a[10]||(a[10]=u("h2",null,"Задание 1",-1)),u("div",null,[u("form",{onSubmit:D(_,["prevent"]),class:"form-container"},[u("div",M,[a[7]||(a[7]=u("label",{for:"name"},"Имя:",-1)),$(u("input",{id:"name","onUpdate:modelValue":a[0]||(a[0]=n=>e(s).name=n),onBlur:a[1]||(a[1]=n=>e(g)("name")),type:"text",class:S({"input-error":e(c).name&&e(r).name.length}),"aria-invalid":e(c).name&&e(r).name.length?"true":"false","aria-describedby":"error-name",autocomplete:"name"},null,42,G),[[B,e(s).name,void 0,{trim:!0}]]),e(c).name&&e(r).name.length?(i(),l("ul",I,[(i(!0),l(k,null,V(e(r).name,(n,h)=>(i(),l("li",{key:h},T(n),1))),128))])):w("",!0)]),u("div",P,[a[8]||(a[8]=u("label",{for:"email"},"Email:",-1)),$(u("input",{id:"email","onUpdate:modelValue":a[2]||(a[2]=n=>e(s).email=n),onBlur:a[3]||(a[3]=n=>e(g)("email")),type:"email",class:S({"input-error":e(c).email&&e(r).email.length}),"aria-invalid":e(c).email&&e(r).email.length?"true":"false","aria-describedby":"error-email",autocomplete:"email"},null,42,R),[[B,e(s).email,void 0,{trim:!0}]]),e(c).email&&e(r).email.length?(i(),l("ul",z,[(i(!0),l(k,null,V(e(r).email,(n,h)=>(i(),l("li",{key:h},T(n),1))),128))])):w("",!0)]),u("div",A,[a[9]||(a[9]=u("label",{for:"password"},"Пароль:",-1)),$(u("input",{id:"password","onUpdate:modelValue":a[4]||(a[4]=n=>e(s).password=n),onBlur:a[5]||(a[5]=n=>e(g)("password")),type:"password",class:S({"input-error":e(c).password&&e(r).password.length}),"aria-invalid":e(c).password&&e(r).password.length?"true":"false","aria-describedby":"error-password",autocomplete:"new-password"},null,42,J),[[B,e(s).password]]),e(c).password&&e(r).password.length?(i(),l("ul",K,[(i(!0),l(k,null,V(e(r).password,(n,h)=>(i(),l("li",{key:h},T(n),1))),128))])):w("",!0)]),u("button",{type:"submit",class:"btn submit-btn",onClick:_},"Отправить"),u("button",{type:"button",onClick:a[6]||(a[6]=(...n)=>e(y)&&e(y)(...n)),class:"btn reset-btn"},"Сбросить"),o.value?(i(),l("p",Q,T(o.value),1)):w("",!0)],32)])],64))}}),C=(p,o)=>{const m=p.__vccOpts||p;for(const[d,s]of o)m[d]=s;return m},X=C(W,[["__scopeId","data-v-e9bb432e"]]);function Y(p,o={}){const m=b(null),d=b(!1),s=b(null),r=b(!1);return{data:m,loading:d,error:s,success:r,fetchData:async(f={})=>{d.value=!0,s.value=null,r.value=!1;try{let y=p;if(o.params){const _=new URLSearchParams(o.params).toString();y+=`?${_}`}const g={...o,...f,headers:{"Content-Type":"application/json",...o.headers,...f.headers},body:o.body?JSON.stringify(o.body):void 0},v=await fetch(y,g);if(!v.ok)throw new Error(`Ошибка ${v.status}: ${v.statusText}`);m.value=await v.json(),r.value=!0}catch(y){s.value=y.message||"Ошибка запроса"}finally{d.value=!1}}}}const Z={xmlns:"http://www.w3.org/2000/svg",width:"256",height:"256",viewBox:"0 0 200 200"};function ee(p,o){return i(),l("svg",Z,o[0]||(o[0]=[H('<radialGradient id="a" cx=".66" cy=".313" fx=".66" fy=".313" gradientTransform="scale(1.5)"><stop offset="0"></stop><stop offset=".3" stop-opacity=".9"></stop><stop offset=".6" stop-opacity=".6"></stop><stop offset=".8" stop-opacity=".3"></stop><stop offset="1" stop-opacity="0"></stop></radialGradient><circle cx="100" cy="100" r="70" fill="none" stroke="url(#a)" stroke-dasharray="200 1000" stroke-linecap="round" stroke-width="16" transform-origin="center"><animateTransform attributeName="transform" calcMode="spline" dur="2" keySplines="0 0 1 1" keyTimes="0;1" repeatCount="indefinite" type="rotate" values="360;0"></animateTransform></circle><circle cx="100" cy="100" r="70" fill="none" stroke="#000" stroke-linecap="round" stroke-width="16" opacity=".2" transform-origin="center"></circle>',3)]))}const te={render:ee},se={class:"container"},ae={key:1},re=["src"],oe={key:1,class:"error"},ne=j({__name:"HttpTest",setup(p){const{data:o,loading:m,success:d,error:s,fetchData:r}=Y("https://dog.ceo/api/breeds/image/random",{method:"GET"});return r(),(c,f)=>(i(),l(k,null,[f[0]||(f[0]=u("h2",null,"Задание 2",-1)),u("div",se,[e(m)?(i(),U(e(te),{key:0})):(i(),l("div",ae,[e(d)?(i(),l("img",{key:0,src:e(o)?.message},null,8,re)):w("",!0),e(s)?(i(),l("div",oe,T(e(s)),1)):w("",!0)]))])],64))}}),ie=C(ne,[["__scopeId","data-v-b7d55952"]]),le={class:"container"},de=j({__name:"HomePage",setup(p){return(o,m)=>(i(),l("div",le,[O(X),O(ie)]))}}),ce=C(de,[["__scopeId","data-v-8231d481"]]);export{ce as default};
